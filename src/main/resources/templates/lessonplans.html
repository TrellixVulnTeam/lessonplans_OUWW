<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="../css/styles_principal.css">

<script>
    
        function showMenu() {
        	//addChecked();
            document.getElementById('mega-menu').style.display = 'block';
            
        }

        function hideMenu() {
            document.getElementById('mega-menu').style.display = 'none';
        }
 
        function addChecked() {     	
        	let checkboxesToCheck = "[[${checkboxesToCheck}]]";
        	
        	if (checkboxesToCheck){
        		checkboxesToCheck = checkboxesToCheck.slice(1, checkboxesToCheck.length -1 );
            	checkboxesToCheck = checkboxesToCheck.split(',');	
            	checkboxesToCheck.forEach(element => console.log(element));
            	
            	//loop over and add checkbox          	
            		console.log(checkboxesToCheck.length)
            		console.log("hello");
            		checkboxesToCheck.forEach(element => {	
                		element = element.trim();
                		if (document.getElementById(element)){	
                    		document.getElementById(element).checked = true
                		}
                	
                	});
        	}
        }

    </script>

<title>Lesson Plans</title>
</head>

<body onload="addChecked()">
	<div th:insert="navbar.html :: nav"></div>

	<div class="main-content">

			<h1 id="large-header" class="mt-5 ml-5 mb-5">Lesson Plans</h1>

			<div  class="mb-2">
				<a class="btn btn--small btn--primary" href='javascript:showMenu()'>Filter lessons</a> <a class="btn btn--small btn--primary"
					href='javascript:hideMenu()'>Hide Search</a> 
			</div>


			<div id="mega-menu">
				<small>*If you select nothing from a category, all from that
					category will be included.</small>

				<form th:action="@{/lessonplans}" th:object="${lessonPlan}"
					method="post">

					<div class="form__group">
						<div class="form__header">Type</div>

						<div>
							<span th:each="typ : ${T(com.enoch.chris.lessonplanwebsite.entity.Type).values()}" th:field="*{type}"> 
								<label class="center-vertical" th:for="${#ids.next('type')}" th:text="${typ.type}">General</label> 
								<input class="center-vertical mr-2" type="radio" th:field="*{type}" th:value="${typ}">
							</span>
						</div>
						
						<div class="form__header ml-4	">Preparation time</div>
						
						<span th:each="prep : ${T(com.enoch.chris.lessonplanwebsite.entity.PreparationTime).values()}" 
						th:field="*{type}"> 
							<label class="center-vertical" th:for="${#ids.next('preparationTime')}" th:text="${prep.time}">General</label> 
							<input class="center-vertical mr-2" type="radio" th:field="*{preparationTime}" th:value="${prep}">
						</span>
						

					</div>

					<div class="form__group">
						<div class="form__header">Topics</div>
						<span th:each="top : ${allTopics}"> <label
							class="center-vertical"
							th:for="${#ids.next('topics')}" th:text="${top.name}">Heating</label>
							<input class="center-vertical mr-2" type="checkbox" th:field="*{topics}" th:value="${top.id}" />

						</span>
					</div>

					<div class="form__group ">
						<div class="form__header">Levels</div>
						<span th:each="sub : ${allSubscriptions}"
							th:field="*{assignedSubscription}"> <label
							class="center-vertical"
							th:for="${#ids.next('assignedSubscription')}"
							th:text="${sub.displayName}">General</label>
							 <input 
							 class="center-vertical mr-2"
							type="radio"
							th:field="*{assignedSubscription}" th:value="${sub.id}">
						</span>
					</div>

					<div class="form__group ">
						<div class="form__header">Grammar</div>
						<span th:each="g : ${allGrammar}"> <label
							class="center-vertical"
							th:for="${#ids.next('grammar')}" th:text="${g.grammarPoint}">Heating</label>
							<input class="center-vertical mr-2" type="checkbox" th:field="*{grammar}" th:value="${g.id}" />
						</span>
					</div>

					<div class="form__group">
						<div class="form__header">Lesson Time</div>

						<span
							th:each="dur : ${T(com.enoch.chris.lessonplanwebsite.entity.LessonTime).values()}"
							th:field="*{lessonTime}"> <label
							class="center-vertical"
							th:for="${#ids.next('lessonTime')}" th:text="${dur.time}">General</label>
							<input class="center-vertical mr-2" type="radio" th:field="*{lessonTime}" th:value="${dur}">
						</span>

					</div>

					<div class="form__group ">
						<div class="form__header">Skill</div>

						<label class="center-vertical" th:for="${#ids.next('vocabulary')}">Vocabulary</label> <input
						class="center-vertical mr-3"
							type="checkbox" th:field="*{vocabulary}" /> <label
							class="center-vertical"
							th:for="${#ids.next('listening')}">Listening</label> <input
							class="center-vertical mr-3"
							type="checkbox" th:field="*{listening}" /> <label
							class="center-vertical"
							th:for="${#ids.next('reading')}">Reading</label> <input
							class="center-vertical mr-3"
							type="checkbox" th:field="*{reading}" /> <label
							class="center-vertical"
							th:for="${#ids.next('writing')}">Writing</label> <input
							class="center-vertical mr-3"
							type="checkbox" th:field="*{writing}" />

					</div>

					<div class="form__group ">
						<div class="form__header">LessonContent</div>

						<label th:for="${#ids.next('video')}">Video</label> <input
							type="checkbox" th:field="*{video}" /> <label
							th:for="${#ids.next('song')}">Song</label> <input
							type="checkbox" th:field="*{song}" /> <label
							th:for="${#ids.next('funClass')}">Just for fun</label> <input
							type="checkbox" th:field="*{funClass}" /> <label
							th:for="${#ids.next('games')}">Games</label> <input
							type="checkbox" th:field="*{games}" /> <label
							th:for="${#ids.next('jigsaw')}">Jigsaw</label> <input
							type="checkbox" th:field="*{jigsaw}" /> <label
							th:for="${#ids.next('translation')}">Translation</label> <input
							type="checkbox" th:field="*{translation}" />

					</div>

					<div class="form__group ">
						<div class="form__header">Speaking</div>

						<label th:for="${#ids.next('speakingAmount')}">Speaking
							Only</label> <input type="checkbox" th:field="*{speakingAmount}"
							th:value="SPEAKING_ONLY">
							
							<div class="form__header">Resources</div>

						<label th:for="${#ids.next('noPrintedMaterialsNeeded')}">No
							printed materials needed</label> <input type="checkbox"
							th:field="*{noPrintedMaterialsNeeded}" />

					</div>
			

					<button class="btn btn--small btn--primary" type="submit" name="save">Submit</button>

				</form>

			</div>
		

		<div class="lp-container">
			<div class="card mr-2 mb-2" th:each="lp : ${lessonPlans}">
				<div class="card__side">
				<h2 class="h2" th:text="${lp.title}">Heading</h2>
					 <div class="card__picture card__picture--1">
						<img th:src="${lp.picture?.fileLocation}" th:alt="${lp.picture?.name}"/>
					 </div>
					 <div class="card__details">		 
						 <ul>
							 <li th:text="${lp.assignedSubscription.displayName}">Level</li>
							 <li th:text="${lp.type.type + ' English'}">Type</li>
							 
							 <li th:if="${lp.topics != null}" th:text="${lp.topics.get(0).name.substring(0, 1).toUpperCase() + lp.topics.get(0).name.substring(1)}">Topic</li>
							 
							 <li th:text="${lp.preparationTime.time + ' mins prep.'}">Preparation Time</li>
							 


							 <li><a class="mt-1 ml-auto btn  btn--info" href="checkout.html" th:href="@{/lessonplans/__${lp.assignedSubscription.name}__/(id=${lp.id})}">Check it out</a></li>

							 <!--   <li><a class="mt-1 ml-auto btn btn--med btn--primary" href="checkout.html" th:href="@{../checkout(orderId=${order.id})}">Buy All</a></li>   -->

							


							 
						 </ul>						 
					 </div>
				</div>
			</div>
		</div>

		<!--			<div class="lp-container mt-3">

				<div class="mr-7 mb-1" th:each="lp : ${lessonPlans}">
					<h2 th:text="${lp.title}">Example H2</h2>
					<ul class="display-list">
						<li th:text="${lp.title}">Title</li>
						<li th:text="${lp.assignedSubscription.displayName}">Subscription</li>
						<li th:text="${lp.type.type}">Type</li>
					</ul>
					<a class="btn btn--small btn--secondary" href='#'>Add to basket</a> <a
						class="btn btn--small btn--action-primary"
						th:href="@{/../checkout(id=${lp.assignedSubscription.name})}">Buy</a>
					<br> <br>


				</div>
			</div>-->







			


	</div>
</body>

</html>